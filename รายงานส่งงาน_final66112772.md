# ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô ‚Äî Election Watch

## ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå: `final66112772`

## ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤: 66112772

## GitHub: [https://github.com/Apinan1234/Flutter-Project](https://github.com/Apinan1234/Flutter-Project)

---

## ‚úÖ ‡πÉ‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á (Student Checklist)

| ‡∏™‡πà‡∏ß‡∏ô                  | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ¬†template ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÑ‡∏ß‡πâ‡∏™‡πà‡∏á‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå                                                         | ‡∏ó‡∏≥‡πÑ‡∏î‡πâ |
| ------------------------- | ------------------------------------------------------------------------------------------------------------------------------ | :--------: |
| **1. Home**         | 1.1 ‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π/‡∏õ‡∏∏‡πà‡∏° ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö 4 ‡∏´‡∏ô‡πâ‡∏≤                                        |    ‚úîÔ∏è    |
|                           | 1.2 ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Home ‡πÑ‡∏î‡πâ                                 |    ‚úîÔ∏è    |
|                           | 1.3 ‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏µ SQLite ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏ï‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å        |    ‚úîÔ∏è    |
|                           | 1.4 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á SQLite ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏´‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ                                            |    ‚úîÔ∏è    |
|                           | 1.5 ‡πÅ‡∏ó‡∏£‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô (2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á) ‡∏•‡∏á Database ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà             |    ‚úîÔ∏è    |
|                           | 1.6 Query ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô "‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Offline)" ‡πÑ‡∏î‡πâ                                             |    ‚úîÔ∏è    |
|                           | 1.7 Query ‡∏´‡∏≤ "3 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á" ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÑ‡∏î‡πâ             |    ‚úîÔ∏è    |
|                           | 1.8 ‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ (‡∏Ç‡πâ‡∏≠ 1.6, 1.7) ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô UI ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á                                        |    ‚úîÔ∏è    |
| **2. Report**       | 2.1 ‡∏°‡∏µ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏±‡∏ö ‡∏ä‡∏∑‡πà‡∏≠, ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á/‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏î‡πâ      |    ‚úîÔ∏è    |
|                           | 2.2 Dropdown "‡∏´‡∏ô‡πà‡∏ß‡∏¢" ‡πÅ‡∏•‡∏∞ "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î" ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á SQLite                                      |    ‚úîÔ∏è    |
|                           | 2.3 ‡πÇ‡∏°‡πÄ‡∏î‡∏• AI ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏£‡∏π‡∏õ ‡πÅ‡∏•‡∏∞‡πÇ‡∏ä‡∏ß‡πå Label + % ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÑ‡∏î‡πâ                           |            |
|                           | 2.4 ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Logic ‡πÉ‡∏´‡πâ‡∏ú‡∏• AI ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤ Dropdown ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à                  |            |
|                           | 2.5 ‡πÉ‡∏ä‡πâ Custom Model ‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏£‡∏ô‡πÄ‡∏≠‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà MobileNet ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)                                             |            |
|                           | 2.6 ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ö‡∏ö Offline (SQLite) ‡πÇ‡∏î‡∏¢‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à                         |    ‚úîÔ∏è    |
|                           | 2.7 ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ö‡∏ö Online ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏∂‡πâ‡∏ô Firebase ‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à                                           |            |
|                           | 2.8 ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ evidence_photo ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô null/"OFFLINE_ONLY" ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á Firebase                     |            |
| **3. Edit Station** | 3.1 ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ ‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏° ‡πÅ‡∏•‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå‡πÑ‡∏î‡πâ   |    ‚úîÔ∏è    |
|                           | 3.2 ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ß‡πà‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏´‡∏≤‡∏Å‡∏ú‡∏¥‡∏î‡∏ü‡∏≠‡∏£‡πå‡πÅ‡∏°‡∏ï‡∏´‡πâ‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å  |    ‚úîÔ∏è    |
|                           | 3.3 Query ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Exclude ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á) ‡πÑ‡∏î‡πâ |    ‚úîÔ∏è    |
|                           | 3.4 ‡∏£‡∏∞‡∏á‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡πÅ‡∏•‡∏∞‡πÇ‡∏ä‡∏ß‡πå‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Error ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÑ‡∏î‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô                 |    ‚úîÔ∏è    |
|                           | 3.5 Query ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (COUNT) ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏µ‡πâ ‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á incident_report       |    ‚úîÔ∏è    |
|                           | 3.6 Logic: ‡∏°‡∏µ‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‚Üí ‡πÇ‡∏ä‡∏ß‡πå Dialog ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ã‡∏ü / ‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí ‡πÄ‡∏ã‡∏ü‡πÄ‡∏•‡∏¢                     |    ‚úîÔ∏è    |
|                           | 3.7 ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô SQL UPDATE ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á polling_station ‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏£‡∏¥‡∏á            |    ‚úîÔ∏è    |
|                           | 3.8 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏´‡∏ô‡πâ‡∏≤ List ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (State Management)   |    ‚úîÔ∏è    |
| **4. List**         | 4.1 ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å SQLite (Offline) ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏î‡πâ                             |    ‚úîÔ∏è    |
|                           | 4.2 ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô "‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á" (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà ID)                                  |    ‚úîÔ∏è    |
|                           | 4.3 ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô "‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î" (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà ID)                                    |    ‚úîÔ∏è    |
|                           | 4.4 ‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û Thumbnail (‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å path ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á) ‡πÇ‡∏ä‡∏ß‡πå‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£                       |    ‚úîÔ∏è    |
|                           | 4.5 ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô ‡∏™‡∏±‡πà‡∏á‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ                        |    ‚úîÔ∏è    |
|                           | 4.6 ‡∏°‡∏µ Dialog ‡∏ñ‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ô‡πà‡πÉ‡∏à" ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏•‡∏ö                                                 |    ‚úîÔ∏è    |
|                           | 4.7 ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á SQLite ‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏£‡∏¥‡∏á                                 |    ‚úîÔ∏è    |
|                           | 4.8 ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏•‡∏ö ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà          |    ‚úîÔ∏è    |
| **5. Search**       | 5.1 ‡∏°‡∏µ Textbox ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤                                                  |    ‚úîÔ∏è    |
|                           | 5.2 ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô (LIKE) ‡∏à‡∏≤‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå "‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á" ‡πÑ‡∏î‡πâ                                     |    ‚úîÔ∏è    |
|                           | 5.3 ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô (LIKE) ‡∏à‡∏≤‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î" ‡πÑ‡∏î‡πâ                                       |    ‚úîÔ∏è    |
|                           | 5.4 ‡∏°‡∏µ Dropdown ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏° "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (Severity)"                                             |    ‚úîÔ∏è    |
|                           | 5.5 ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Query / Join ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á violation_type                              |    ‚úîÔ∏è    |
|                           | 5.6 ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° Dropdown ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á                                       |    ‚úîÔ∏è    |
|                           | 5.7 ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏™‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç (Text + Dropdown) ‡πÑ‡∏î‡πâ                                                      |    ‚úîÔ∏è    |
|                           | 5.8 ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏≤‡∏á UI ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•                         |    ‚úîÔ∏è    |

**‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á: 15.5 / 20.0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô**

---

## ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ ‚Üî ‡πÑ‡∏ü‡∏•‡πå‡πÇ‡∏Ñ‡πâ‡∏î

| ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠         | ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å                    | ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á   |
| -------------------- | ----------------------------------- | ------------------------------------ |
| Home Dashboard       | `lib/screens/home.dart`           | `lib/helpers/database_helper.dart` |
| Report Incident      | `lib/screens/report.dart`         | `lib/helpers/database_helper.dart` |
| Edit Polling Station | `lib/screens/edit_station.dart`   | `lib/helpers/database_helper.dart` |
| Incident List        | `lib/screens/list_screen.dart`    | `lib/helpers/database_helper.dart` |
| Search & Filter      | `lib/screens/filter_screen.dart`  | `lib/helpers/database_helper.dart` |
| Entry Point / Routes | `lib/main.dart`                   | ‚Äî                                   |
| Data Model           | `lib/models/incident_report.dart` | ‚Äî                                   |

---

## ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå

---

### lib/main.dart

```dart
import 'package:flutter/material.dart';
import 'helpers/database_helper.dart';
import 'screens/home.dart';
import 'screens/report.dart';
import 'screens/edit_station.dart';
import 'screens/list_screen.dart';
import 'screens/filter_screen.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await DatabaseHelper().database; // init DB on startup
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Election Watch',
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.indigo),
        useMaterial3: true,
      ),
      initialRoute: '/',
      routes: {
        '/':       (ctx) => const HomeScreen(),
        '/report': (ctx) => const ReportScreen(),
        '/edit':   (ctx) => const EditStationScreen(),
        '/list':   (ctx) => const ListScreen(),
        '/filter': (ctx) => const FilterScreen(),
      },
    );
  }
}
```

---

### lib/helpers/database_helper.dart

```dart
import 'package:sqflite/sqflite.dart';
import 'package:path/path.dart' as p;

class DatabaseHelper {
  static final DatabaseHelper _instance = DatabaseHelper._internal();
  factory DatabaseHelper() => _instance;
  DatabaseHelper._internal();
  static Database? _db;

  Future<Database> get database async {
    if (_db != null) return _db!;
    _db = await _initDB();
    return _db!;
  }

  // [1.3] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå DB ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
  Future<bool> dbExists() async {
    final dbPath = await getDatabasesPath();
    final full = p.join(dbPath, 'election.db');
    return databaseExists(full);
  }

  Future<Database> _initDB() async {
    final dbPath = await getDatabasesPath();
    final full = p.join(dbPath, 'election.db');
    return openDatabase(
      full,
      version: 1,
      onCreate: (db, v) async {
        // [1.4] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        await db.execute('''CREATE TABLE polling_station(
          station_id   INTEGER PRIMARY KEY,
          station_name TEXT,
          zone         TEXT,
          province     TEXT
        )''');
        await db.execute('''CREATE TABLE violation_type(
          type_id   INTEGER PRIMARY KEY,
          type_name TEXT,
          severity  TEXT
        )''');
        await db.execute('''CREATE TABLE incident_report(
          report_id      INTEGER PRIMARY KEY AUTOINCREMENT,
          station_id     INTEGER,
          type_id        INTEGER,
          reporter_name  TEXT,
          description    TEXT,
          evidence_photo TEXT,
          timestamp      TEXT,
          ai_result      TEXT,
          ai_confidence  REAL,
          FOREIGN KEY (station_id) REFERENCES polling_station(station_id),
          FOREIGN KEY (type_id)    REFERENCES violation_type(type_id)
        )''');
        // [1.5] Seed data ‡∏ï‡∏≤‡∏£‡∏≤‡∏á 1 ‡πÅ‡∏•‡∏∞ 2
        await _seedData(db);
      },
    );
  }

  Future<void> _seedData(Database db) async {
    final stations = [
      [101, '‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏î‡∏û‡∏£‡∏∞‡∏°‡∏´‡∏≤‡∏ò‡∏≤‡∏ï‡∏∏', '‡πÄ‡∏Ç‡∏ï 1', '‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä'],
      [102, '‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏ó‡πà‡∏≤‡∏ß‡∏±‡∏á',   '‡πÄ‡∏Ç‡∏ï 1', '‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä'],
      [103, '‡∏®‡∏≤‡∏•‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏£‡∏µ‡∏ß‡∏á', '‡πÄ‡∏Ç‡∏ï 2', '‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä'],
      [104, '‡∏´‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ó‡∏∏‡πà‡∏á‡∏™‡∏á',    '‡πÄ‡∏Ç‡∏ï 3', '‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä'],
    ];
    for (final s in stations) {
      await db.insert('polling_station', {
        'station_id': s[0], 'station_name': s[1], 'zone': s[2], 'province': s[3]
      });
    }
    final types = [
      [1, '‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ç‡∏≤‡∏¢‡πÄ‡∏™‡∏µ‡∏¢‡∏á (Buying Votes)',       'High'],
      [2, '‡∏Ç‡∏ô‡∏Ñ‡∏ô‡πÑ‡∏õ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Transportation)',           'High'],
      [3, '‡∏´‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ (Overtime Campaign)',       'Medium'],
      [4, '‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏õ‡πâ‡∏≤‡∏¢‡∏´‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á (Vandalism)',              'Low'],
      [5, '‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏≤‡∏á (Bias Official)', 'High'],
    ];
    for (final t in types) {
      await db.insert('violation_type', {
        'type_id': t[0], 'type_name': t[1], 'severity': t[2]
      });
    }
  }

  // [1.6] ‡∏ô‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  Future<int> countAllReports() async {
    final db = await database;
    final r = await db.rawQuery('SELECT COUNT(*) as c FROM incident_report');
    return (r.first['c'] as int?) ?? 0;
  }

  // [1.7] TOP 3 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
  Future<List<Map<String, dynamic>>> getTop3Stations() async {
    final db = await database;
    return db.rawQuery('''
      SELECT ps.station_name, COUNT(*) as total
      FROM   incident_report ir
      JOIN   polling_station ps ON ir.station_id = ps.station_id
      GROUP  BY ir.station_id
      ORDER  BY total DESC
      LIMIT  3
    ''');
  }

  Future<List<Map<String, dynamic>>> getAllStations() async {
    final db = await database;
    return db.query('polling_station');
  }

  Future<List<Map<String, dynamic>>> getAllTypes() async {
    final db = await database;
    return db.query('violation_type');
  }

  Future<int> insertReport(Map<String, dynamic> data) async {
    final db = await database;
    return db.insert('incident_report', data);
  }

  // [4.1‚Äì4.3] ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏° JOIN
  Future<List<Map<String, dynamic>>> getAllReports() async {
    final db = await database;
    return db.rawQuery('''
      SELECT ir.*, ps.station_name, vt.type_name, vt.severity
      FROM   incident_report ir
      JOIN   polling_station ps ON ir.station_id = ps.station_id
      JOIN   violation_type  vt ON ir.type_id    = vt.type_id
      ORDER  BY ir.timestamp DESC
    ''');
  }

  // [4.7] ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
  Future<int> deleteReport(int id) async {
    final db = await database;
    return db.delete('incident_report', where: 'report_id = ?', whereArgs: [id]);
  }

  // [5.2‚Äì5.7] ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ LIKE + JOIN severity
  Future<List<Map<String, dynamic>>> search(String keyword, String? severity) async {
    final db     = await database;
    final params = <dynamic>[];
    String sql = '''
      SELECT ir.*, ps.station_name, vt.type_name, vt.severity
      FROM   incident_report ir
      JOIN   polling_station ps ON ir.station_id = ps.station_id
      JOIN   violation_type  vt ON ir.type_id    = vt.type_id
      WHERE  1=1
    ''';
    if (keyword.trim().isNotEmpty) {
      sql += ' AND (ir.reporter_name LIKE ? OR ir.description LIKE ?)';
      params.addAll(['%${keyword.trim()}%', '%${keyword.trim()}%']);
    }
    if (severity != null) {
      sql += ' AND vt.severity = ?';
      params.add(severity);
    }
    sql += ' ORDER BY ir.timestamp DESC';
    return db.rawQuery(sql, params);
  }

  // [3.3] ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥
  Future<bool> isNameDuplicate(String name, int excludeId) async {
    final db = await database;
    final r  = await db.rawQuery(
      'SELECT COUNT(*) as c FROM polling_station WHERE station_name = ? AND station_id != ?',
      [name, excludeId],
    );
    return ((r.first['c'] as int?) ?? 0) > 0;
  }

  // [3.5] ‡∏ô‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢
  Future<int> countReportsByStation(int stationId) async {
    final db = await database;
    final r  = await db.rawQuery(
      'SELECT COUNT(*) as c FROM incident_report WHERE station_id = ?',
      [stationId],
    );
    return (r.first['c'] as int?) ?? 0;
  }

  // [3.7] UPDATE station_name
  Future<int> updateStationName(int stationId, String newName) async {
    final db = await database;
    return db.update(
      'polling_station',
      {'station_name': newName},
      where: 'station_id = ?',
      whereArgs: [stationId],
    );
  }
}
```

---

### lib/models/incident_report.dart

```dart
class IncidentReport {
  final int?   reportId;
  final int    stationId;
  final int    typeId;
  final String reporterName;
  final String? description;
  final String? evidencePhoto;
  final String  timestamp;
  final String? aiResult;
  final double  aiConfidence;

  IncidentReport({
    this.reportId,
    required this.stationId,
    required this.typeId,
    required this.reporterName,
    this.description,
    this.evidencePhoto,
    required this.timestamp,
    this.aiResult,
    this.aiConfidence = 0.0,
  });

  factory IncidentReport.fromMap(Map<String, dynamic> m) => IncidentReport(
    reportId:      m['report_id']     as int?,
    stationId:     m['station_id']    as int,
    typeId:        m['type_id']       as int,
    reporterName:  m['reporter_name'] as String,
    description:   m['description']   as String?,
    evidencePhoto: m['evidence_photo']as String?,
    timestamp:     m['timestamp']     as String,
    aiResult:      m['ai_result']     as String?,
    aiConfidence:  (m['ai_confidence'] as num?)?.toDouble() ?? 0.0,
  );

  Map<String, dynamic> toMap() => {
    if (reportId != null) 'report_id': reportId,
    'station_id':    stationId,
    'type_id':       typeId,
    'reporter_name': reporterName,
    'description':   description,
    'evidence_photo':evidencePhoto,
    'timestamp':     timestamp,
    'ai_result':     aiResult,
    'ai_confidence': aiConfidence,
  };
}
```

---

### lib/screens/home.dart

```dart
import 'package:flutter/material.dart';
import '../helpers/database_helper.dart';

class HomeScreen extends StatefulWidget {
  const HomeScreen({super.key});
  @override
  State<HomeScreen> createState() => _HomeScreenState();
}

class _HomeScreenState extends State<HomeScreen> {
  final _db = DatabaseHelper();
  int _total = 0;
  List<Map<String, dynamic>> _top3 = [];
  bool _loading = true;

  @override
  void initState() {
    super.initState();
    _loadStats();
  }

  Future<void> _loadStats() async {
    setState(() => _loading = true);
    final total = await _db.countAllReports();
    final top3  = await _db.getTop3Stations();
    setState(() { _total = total; _top3 = top3; _loading = false; });
  }

  void _goTo(String route) {
    Navigator.pushNamed(context, route).then((_) => _loadStats());
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Election Watch'),
        backgroundColor: Colors.indigo,
        foregroundColor: Colors.white,
      ),
      body: _loading
          ? const Center(child: CircularProgressIndicator())
          : RefreshIndicator(
              onRefresh: _loadStats,
              child: SingleChildScrollView(
                physics: const AlwaysScrollableScrollPhysics(),
                padding: const EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Card(
                      color: Colors.indigo.shade50,
                      child: Padding(
                        padding: const EdgeInsets.all(16),
                        child: Row(children: [
                          const Icon(Icons.bar_chart, color: Colors.indigo, size: 32),
                          const SizedBox(width: 16),
                          Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
                            const Text('‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Offline)', style: TextStyle(color: Colors.grey)),
                            Text('$_total ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á', style: const TextStyle(fontSize: 28, fontWeight: FontWeight.bold, color: Colors.indigo)),
                          ]),
                        ]),
                      ),
                    ),
                    const SizedBox(height: 16),
                    const Text('üèÜ 3 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î',
                        style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold)),
                    const SizedBox(height: 8),
                    ..._top3.isEmpty
                        ? [const Text('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', style: TextStyle(color: Colors.grey))]
                        : _top3.asMap().entries.map((e) => Card(
                            child: ListTile(
                              leading: CircleAvatar(
                                backgroundColor: [Colors.amber, Colors.grey.shade400, Colors.brown.shade300][e.key],
                                child: Text('${e.key + 1}', style: const TextStyle(color: Colors.white, fontWeight: FontWeight.bold)),
                              ),
                              title: Text(e.value['station_name'] ?? '-'),
                              trailing: Chip(label: Text('${e.value['total']} ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á'), backgroundColor: Colors.indigo.shade100),
                            ),
                          )),
                    const SizedBox(height: 24),
                    const Text('‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å', style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold)),
                    const SizedBox(height: 8),
                    _menuButton(Icons.report,            '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏ (Report)',           '/report', Colors.red),
                    _menuButton(Icons.edit_location_alt, '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (Edit)', '/edit',   Colors.orange),
                    _menuButton(Icons.list_alt,          '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏ (List)',       '/list',   Colors.blue),
                    _menuButton(Icons.search,            '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (Search)',              '/filter', Colors.green),
                  ],
                ),
              ),
            ),
    );
  }

  Widget _menuButton(IconData icon, String label, String route, Color color) {
    return Padding(
      padding: const EdgeInsets.only(bottom: 8),
      child: ElevatedButton.icon(
        onPressed: () => _goTo(route),
        icon: Icon(icon),
        label: Text(label),
        style: ElevatedButton.styleFrom(
          minimumSize: const Size.fromHeight(50),
          backgroundColor: color,
          foregroundColor: Colors.white,
        ),
      ),
    );
  }
}
```

---

### lib/screens/report.dart

```dart
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import '../helpers/database_helper.dart';

class ReportScreen extends StatefulWidget {
  const ReportScreen({super.key});
  @override
  State<ReportScreen> createState() => _ReportScreenState();
}

class _ReportScreenState extends State<ReportScreen> {
  final _formKey  = GlobalKey<FormState>();
  final _nameCtrl = TextEditingController();
  final _descCtrl = TextEditingController();
  final _db       = DatabaseHelper();
  final _picker   = ImagePicker();

  List<Map<String, dynamic>> _stations = [];
  List<Map<String, dynamic>> _types    = [];
  int?    _selStation;
  int?    _selType;
  String? _imagePath;
  String? _aiLabel;
  double  _aiConf = 0.0;
  bool    _saving = false;

  @override
  void initState() {
    super.initState();
    _loadDropdowns();
  }

  Future<void> _loadDropdowns() async {
    final s = await _db.getAllStations();
    final t = await _db.getAllTypes();
    setState(() { _stations = s; _types = t; });
  }

  Future<void> _pickImage(ImageSource src) async {
    final f = await _picker.pickImage(source: src, maxWidth: 800);
    if (f != null) setState(() { _imagePath = f.path; });
  }

  Future<void> _save() async {
    if (!_formKey.currentState!.validate()) return;
    if (_selStation == null || _selType == null) {
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î')),
      );
      return;
    }
    setState(() => _saving = true);
    final ts = DateTime.now().toString().substring(0, 19);
    await _db.insertReport({
      'station_id':     _selStation,
      'type_id':        _selType,
      'reporter_name':  _nameCtrl.text.trim(),
      'description':    _descCtrl.text.trim(),
      'evidence_photo': _imagePath,
      'timestamp':      ts,
      'ai_result':      _aiLabel,
      'ai_confidence':  _aiConf,
    });
    if (mounted) {
      ScaffoldMessenger.of(context).showSnackBar(const SnackBar(content: Text('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ')));
      Navigator.pop(context);
    }
  }

  @override
  void dispose() { _nameCtrl.dispose(); _descCtrl.dispose(); super.dispose(); }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏'),
        leading: IconButton(icon: const Icon(Icons.home), onPressed: () => Navigator.pushNamedAndRemoveUntil(context, '/', (_) => false)),
      ),
      body: Form(
        key: _formKey,
        child: ListView(
          padding: const EdgeInsets.all(16),
          children: [
            DropdownButtonFormField<int>(
              decoration: const InputDecoration(labelText: '‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á *', border: OutlineInputBorder()),
              initialValue: _selStation,
              items: _stations.map((s) => DropdownMenuItem<int>(value: s['station_id'] as int, child: Text('${s['station_name']}'))).toList(),
              onChanged: (v) => setState(() => _selStation = v),
              validator: (v) => v == null ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á' : null,
            ),
            const SizedBox(height: 12),
            DropdownButtonFormField<int>(
              decoration: const InputDecoration(labelText: '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î *', border: OutlineInputBorder()),
              initialValue: _selType,
              items: _types.map((t) => DropdownMenuItem<int>(value: t['type_id'] as int, child: Text(t['type_name']))).toList(),
              onChanged: (v) => setState(() => _selType = v),
              validator: (v) => v == null ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î' : null,
            ),
            const SizedBox(height: 12),
            TextFormField(
              controller: _nameCtrl,
              decoration: const InputDecoration(labelText: '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á *', border: OutlineInputBorder(), prefixIcon: Icon(Icons.person)),
              validator: (v) => (v == null || v.trim().isEmpty) ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠' : null,
            ),
            const SizedBox(height: 12),
            TextFormField(
              controller: _descCtrl,
              decoration: const InputDecoration(labelText: '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î', border: OutlineInputBorder(), prefixIcon: Icon(Icons.notes), alignLabelWithHint: true),
              maxLines: 3,
            ),
            const SizedBox(height: 12),
            Row(children: [
              Expanded(child: OutlinedButton.icon(onPressed: () => _pickImage(ImageSource.camera),  icon: const Icon(Icons.camera_alt), label: const Text('‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û'))),
              const SizedBox(width: 8),
              Expanded(child: OutlinedButton.icon(onPressed: () => _pickImage(ImageSource.gallery), icon: const Icon(Icons.photo_library), label: const Text('‡∏Ñ‡∏•‡∏±‡∏á‡∏†‡∏≤‡∏û'))),
            ]),
            if (_imagePath != null) ...[
              const SizedBox(height: 12),
              ClipRRect(borderRadius: BorderRadius.circular(8), child: Image.file(File(_imagePath!), height: 200, width: double.infinity, fit: BoxFit.cover)),
            ],
            const SizedBox(height: 24),
            ElevatedButton.icon(
              onPressed: _saving ? null : _save,
              icon: _saving ? const SizedBox(width: 18, height: 18, child: CircularProgressIndicator(strokeWidth: 2, color: Colors.white)) : const Icon(Icons.save),
              label: Text(_saving ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...' : '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô'),
              style: ElevatedButton.styleFrom(minimumSize: const Size.fromHeight(52), backgroundColor: Colors.indigo, foregroundColor: Colors.white),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

### lib/screens/edit_station.dart

```dart
import 'package:flutter/material.dart';
import '../helpers/database_helper.dart';

class EditStationScreen extends StatefulWidget {
  const EditStationScreen({super.key});
  @override
  State<EditStationScreen> createState() => _EditStationScreenState();
}

class _EditStationScreenState extends State<EditStationScreen> {
  final _db = DatabaseHelper();
  List<Map<String, dynamic>> _stations = [];
  bool _loading = true;

  @override
  void initState() { super.initState(); _loadStations(); }

  Future<void> _loadStations() async {
    setState(() => _loading = true);
    final s = await _db.getAllStations();
    setState(() { _stations = s; _loading = false; });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á'),
        leading: IconButton(icon: const Icon(Icons.home), onPressed: () => Navigator.pushNamedAndRemoveUntil(context, '/', (_) => false)),
      ),
      body: _loading ? const Center(child: CircularProgressIndicator())
          : ListView.builder(
              itemCount: _stations.length,
              itemBuilder: (ctx, i) {
                final st = _stations[i];
                return ListTile(
                  leading: const Icon(Icons.location_on, color: Colors.orange),
                  title: Text(st['station_name'] ?? '-'),
                  subtitle: Text('${st['zone']} ‚Äî ${st['province']}'),
                  trailing: const Icon(Icons.edit, color: Colors.grey),
                  onTap: () async {
                    final changed = await Navigator.push<bool>(ctx, MaterialPageRoute(builder: (_) => _EditFormScreen(station: st)));
                    if (changed == true) _loadStations();
                  },
                );
              },
            ),
    );
  }
}

class _EditFormScreen extends StatefulWidget {
  final Map<String, dynamic> station;
  const _EditFormScreen({required this.station});
  @override
  State<_EditFormScreen> createState() => _EditFormScreenState();
}

class _EditFormScreenState extends State<_EditFormScreen> {
  final _db = DatabaseHelper();
  late TextEditingController _nameCtrl;
  bool _saving = false;
  static const _allowedPrefixes = ['‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏ß‡∏±‡∏î', '‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå', '‡∏®‡∏≤‡∏•‡∏≤', '‡∏´‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°'];

  @override
  void initState() {
    super.initState();
    _nameCtrl = TextEditingController(text: widget.station['station_name'] as String? ?? '');
  }

  @override
  void dispose() { _nameCtrl.dispose(); super.dispose(); }

  bool _isValidPrefix(String name) => _allowedPrefixes.any((p) => name.startsWith(p));

  void _showError(String msg) {
    ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(msg), backgroundColor: Colors.red, duration: const Duration(seconds: 3)));
  }

  Future<void> _save() async {
    final name = _nameCtrl.text.trim();
    if (name.isEmpty) { _showError('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢'); return; }
    if (!_isValidPrefix(name)) {
      _showError('‚ùå ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô / ‡∏ß‡∏±‡∏î / ‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå / ‡∏®‡∏≤‡∏•‡∏≤ / ‡∏´‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°');
      return;
    }
    final isDup = await _db.isNameDuplicate(name, widget.station['station_id'] as int);
    if (isDup) {
      _showError('‚ùå ‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥: ‡∏°‡∏µ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö');
      return;
    }
    setState(() => _saving = true);
    final count = await _db.countReportsByStation(widget.station['station_id'] as int);
    if (count > 0) {
      final ok = await showDialog<bool>(
        context: context,
        builder: (ctx) => AlertDialog(
          title: const Text('‚ö†Ô∏è ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'),
          content: Text('‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô $count ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á\n‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?'),
          actions: [
            TextButton(onPressed: () => Navigator.pop(ctx, false), child: const Text('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å')),
            ElevatedButton(onPressed: () => Navigator.pop(ctx, true), style: ElevatedButton.styleFrom(backgroundColor: Colors.orange), child: const Text('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô', style: TextStyle(color: Colors.white))),
          ],
        ),
      );
      if (ok != true) { setState(() => _saving = false); return; }
    }
    await _db.updateStationName(widget.station['station_id'] as int, name);
    if (mounted) {
      ScaffoldMessenger.of(context).showSnackBar(const SnackBar(content: Text('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ'), backgroundColor: Colors.green));
      Navigator.pop(context, true);
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πà‡∏ß‡∏¢ #${widget.station['station_id']}')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
          Card(
            color: Colors.grey.shade100,
            child: Padding(padding: const EdgeInsets.all(12), child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
              const Text('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°', style: TextStyle(fontWeight: FontWeight.bold, color: Colors.grey)),
              Text('‡∏ä‡∏∑‡πà‡∏≠: ${widget.station['station_name']}'),
              Text('‡πÄ‡∏Ç‡∏ï: ${widget.station['zone']}  |  ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î: ${widget.station['province']}'),
            ])),
          ),
          const SizedBox(height: 16),
          TextField(
            controller: _nameCtrl,
            decoration: const InputDecoration(
              labelText: '‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà *', border: OutlineInputBorder(),
              helperText: '‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢: ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô / ‡∏ß‡∏±‡∏î / ‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå / ‡∏®‡∏≤‡∏•‡∏≤ / ‡∏´‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°',
              helperMaxLines: 2,
            ),
          ),
          const SizedBox(height: 24),
          ElevatedButton.icon(
            onPressed: _saving ? null : _save,
            icon: _saving ? const SizedBox(width: 18, height: 18, child: CircularProgressIndicator(strokeWidth: 2, color: Colors.white)) : const Icon(Icons.save),
            label: Text(_saving ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...' : '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å'),
            style: ElevatedButton.styleFrom(minimumSize: const Size.fromHeight(50), backgroundColor: Colors.orange, foregroundColor: Colors.white),
          ),
        ]),
      ),
    );
  }
}
```

---

### lib/screens/list_screen.dart

```dart
import 'dart:io';
import 'package:flutter/material.dart';
import '../helpers/database_helper.dart';

class ListScreen extends StatefulWidget {
  const ListScreen({super.key});
  @override
  State<ListScreen> createState() => _ListScreenState();
}

class _ListScreenState extends State<ListScreen> {
  final _db = DatabaseHelper();
  List<Map<String, dynamic>> _reports = [];
  bool _loading = true;

  @override
  void initState() { super.initState(); _loadData(); }

  Future<void> _loadData() async {
    setState(() => _loading = true);
    final data = await _db.getAllReports();
    setState(() { _reports = data; _loading = false; });
  }

  Future<void> _deleteItem(int index) async {
    final id = _reports[index]['report_id'] as int;
    final ok = await showDialog<bool>(
      context: context,
      builder: (ctx) => AlertDialog(
        title: const Text('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö?'),
        content: const Text('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ? ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ'),
        actions: [
          TextButton(onPressed: () => Navigator.pop(ctx, false), child: const Text('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å')),
          TextButton(onPressed: () => Navigator.pop(ctx, true), style: TextButton.styleFrom(foregroundColor: Colors.red), child: const Text('‡∏•‡∏ö')),
        ],
      ),
    );
    if (ok == true) {
      await _db.deleteReport(id);
      setState(() => _reports.removeAt(index));
    }
  }

  Color _severityColor(String? s) {
    switch (s) { case 'High': return Colors.red; case 'Medium': return Colors.orange; case 'Low': return Colors.green; default: return Colors.grey; }
  }

  Widget _thumb(String? path) {
    if (path == null || path.isEmpty || !File(path).existsSync()) {
      return Container(width: 56, height: 56, color: Colors.grey.shade200, child: const Icon(Icons.image_not_supported, color: Colors.grey));
    }
    return ClipRRect(borderRadius: BorderRadius.circular(6), child: Image.file(File(path), width: 56, height: 56, fit: BoxFit.cover));
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏ (${_reports.length})'),
        leading: IconButton(icon: const Icon(Icons.home), onPressed: () => Navigator.pushNamedAndRemoveUntil(context, '/', (_) => false)),
      ),
      body: _loading ? const Center(child: CircularProgressIndicator())
          : _reports.isEmpty ? const Center(child: Column(mainAxisAlignment: MainAxisAlignment.center, children: [Icon(Icons.inbox, size: 64, color: Colors.grey), Text('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£')]))
          : ListView.builder(
              itemCount: _reports.length,
              itemBuilder: (ctx, i) {
                final r = _reports[i];
                return Card(
                  margin: const EdgeInsets.symmetric(horizontal: 12, vertical: 6),
                  child: Padding(
                    padding: const EdgeInsets.all(8),
                    child: Row(children: [
                      _thumb(r['evidence_photo'] as String?),
                      const SizedBox(width: 12),
                      Expanded(child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
                        Text(r['reporter_name'] ?? '-', style: const TextStyle(fontWeight: FontWeight.bold)),
                        Text(r['station_name'] ?? '-', style: const TextStyle(fontSize: 12, color: Colors.grey)),
                        Text(r['type_name'] ?? '-', style: const TextStyle(fontSize: 12, color: Colors.grey)),
                        const SizedBox(height: 4),
                        Chip(label: Text(r['severity'] ?? '-', style: const TextStyle(color: Colors.white, fontSize: 11)), backgroundColor: _severityColor(r['severity'] as String?), padding: EdgeInsets.zero, materialTapTargetSize: MaterialTapTargetSize.shrinkWrap),
                      ])),
                      IconButton(icon: const Icon(Icons.delete_outline, color: Colors.red), onPressed: () => _deleteItem(i)),
                    ]),
                  ),
                );
              },
            ),
    );
  }
}
```

---

### lib/screens/filter_screen.dart

```dart



import 'package:flutter/material.dart';
import '../helpers/database_helper.dart';

class FilterScreen extends StatefulWidget {
  const FilterScreen({super.key});
  @override
  State<FilterScreen> createState() => _FilterScreenState();
}

class _FilterScreenState extends State<FilterScreen> {
  final _db         = DatabaseHelper();
  final _searchCtrl = TextEditingController();
  String? _severity;
  List<Map<String, dynamic>> _results = [];
  bool _hasSearched = false;
  bool _searching   = false;

  Future<void> _search() async {
    setState(() => _searching = true);
    final data = await _db.search(_searchCtrl.text, _severity);
    setState(() { _results = data; _hasSearched = true; _searching = false; });
  }

  void _reset() => setState(() { _searchCtrl.clear(); _severity = null; _results = []; _hasSearched = false; });

  Color _sevColor(String? s) {
    switch (s) { case 'High': return Colors.red; case 'Medium': return Colors.orange; case 'Low': return Colors.green; default: return Colors.grey; }
  }

  @override
  void dispose() { _searchCtrl.dispose(); super.dispose(); }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ / ‡∏Å‡∏£‡∏≠‡∏á'),
        leading: IconButton(icon: const Icon(Icons.home), onPressed: () => Navigator.pushNamedAndRemoveUntil(context, '/', (_) => false)),
        actions: [TextButton.icon(onPressed: _reset, icon: const Icon(Icons.refresh, color: Colors.white), label: const Text('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï', style: TextStyle(color: Colors.white)))],
      ),
      body: Column(children: [
        Container(
          padding: const EdgeInsets.all(12),
          color: Colors.grey.shade50,
          child: Column(children: [
            TextField(
              controller: _searchCtrl,
              decoration: const InputDecoration(labelText: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î', border: OutlineInputBorder(), prefixIcon: Icon(Icons.search), fillColor: Colors.white, filled: true),
              onSubmitted: (_) => _search(),
            ),
            const SizedBox(height: 10),
            DropdownButtonFormField<String>(
              decoration: const InputDecoration(labelText: '‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (Severity)', border: OutlineInputBorder(), prefixIcon: Icon(Icons.filter_list), fillColor: Colors.white, filled: true),
              value: _severity,
              items: const [
                DropdownMenuItem(value: null,     child: Text('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î')),
                DropdownMenuItem(value: 'High',   child: Text('High')),
                DropdownMenuItem(value: 'Medium', child: Text('Medium')),
                DropdownMenuItem(value: 'Low',    child: Text('Low')),
              ],
              onChanged: (v) => setState(() => _severity = v),
            ),
            const SizedBox(height: 10),
            ElevatedButton.icon(
              onPressed: _searching ? null : _search,
              icon: _searching ? const SizedBox(width: 18, height: 18, child: CircularProgressIndicator(strokeWidth: 2, color: Colors.white)) : const Icon(Icons.search),
              label: Text(_searching ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...' : '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤'),
              style: ElevatedButton.styleFrom(minimumSize: const Size.fromHeight(48), backgroundColor: Colors.indigo, foregroundColor: Colors.white),
            ),
          ]),
        ),
        Expanded(
          child: !_hasSearched
              ? const Center(child: Column(mainAxisAlignment: MainAxisAlignment.center, children: [Icon(Icons.manage_search, size: 64, color: Colors.grey), SizedBox(height: 8), Text('‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤', style: TextStyle(color: Colors.grey))]))
              : _results.isEmpty
                  ? const Center(child: Column(mainAxisAlignment: MainAxisAlignment.center, children: [Icon(Icons.search_off, size: 64, color: Colors.grey), SizedBox(height: 8), Text('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (No records found)', style: TextStyle(color: Colors.grey, fontSize: 16))]))
                  : ListView.builder(
                      itemCount: _results.length,
                      itemBuilder: (ctx, i) {
                        final r = _results[i];
                        return ListTile(
                          leading: CircleAvatar(backgroundColor: _sevColor(r['severity'] as String?), child: Text((r['reporter_name'] as String? ?? '?').substring(0, 1), style: const TextStyle(color: Colors.white, fontWeight: FontWeight.bold))),
                          title: Text(r['reporter_name'] ?? '-', style: const TextStyle(fontWeight: FontWeight.w600)),
                          subtitle: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
                            Text(r['station_name'] ?? '-', style: const TextStyle(fontSize: 12)),
                            Text(r['description'] ?? '-', style: const TextStyle(fontSize: 12, color: Colors.grey), maxLines: 1, overflow: TextOverflow.ellipsis),
                          ]),
                          trailing: Chip(label: Text(r['severity'] ?? '-', style: const TextStyle(color: Colors.white, fontSize: 12)), backgroundColor: _sevColor(r['severity'] as String?), padding: EdgeInsets.zero, materialTapTargetSize: MaterialTapTargetSize.shrinkWrap),
                        );
                      },
                    ),
        ),
      ]),
    );
  }
}
```
